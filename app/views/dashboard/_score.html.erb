<div class="container text-align-center pb-5">
  <div>
    <br>
    <div class="">
      <h4>Test your score with</h4>
      <br>
    </div>
  </div>

<!--test the score form-->

  <%#= simple_form_for @user, url: astroboard_path  do |f| %>
    <%#= f.input :birth_date, label: 'Birthday of your Crush', as: :date, data: { score_target: "birth_day"}%>
    <%#= f.input :birth_hour, label: 'Birthhour of your Crush', as: :time, data: { score_target: "birth_hour"}  %>
    <%#= f.input :birth_location, label: 'Birthlocation of your Crush', as: :string, data: { score_target: "birth_location"}  %>
    <%#= f.input :birth_country, label: 'Birthcountry of your Crush', as: :string, data: { score_target: "birth_counrty"}  %>
    <%#= f.button :submit, 'Submit', class: 'btn btn-secondary' %>
  <%# end %>

  <div class="pt-4" data-controller="score">
    <form>
      <div class="form-group">
        <label for="birthday">Birthday</label>
        <input type="date" class="form-control" id="birth_day" data-score-target="birth_day" placeholder="Birthday of your Crush">
      </div><br>

      <div class="form-group">
        <label for="birth_hour">Birth hour</label>
        <input type="hour" class="form-control" id="birth_hour" data-score-target="birth_hour" placeholder="Birth hour of your Crush">
      </div><br>

      <div class="form-group">
        <label for="birth_location">Birth location</label>
        <input type="text" class="form-control" id="birh_location" data-score-target="birth_location" placeholder="Birth location of your Crush">
      </div><br>

      <div class="form-group">
        <label for="birth_country">Birth country</label>
        <input type="text" class="form-control" id="birh_country" data-score-target="birth_country" placeholder="Birth country of your Crush">
      </div><br>

      <fieldset>
          <legend class="h6">Gender of your Crush</legend>

          <div>
            <input type="radio" id="female" name="gender" value="female"
                  checked>
            <label for="female">Female</label>
          </div>

          <div>
            <input type="radio" id="male" name="gender" value="male">
            <label for="male">Male</label>
          </div>
      </fieldset>
      
      <br>

      <button type="submit" class="d-flex btn btn-secondary" data-action="click->score#match_percentage">Submit</button>

    </form>
  </div>

<br>
<%# data-action="click->score#match_percentage"
      mate_score = AstrologyApi.new(api_uid, api_key).match_percentage(
        mate.birth_date,
        mate.birth_hour,
        mate.birth_location, %>

<!--compatibilies-->

  <div class="container">
    <br>

    <div class="">
      <h4>Your compatibilities</h4>
      <br>
    </div>

    <div>
      <% compatibility_degree = ['highly_compatible', 'mid_compatible', 'low_compatible', 'neutral', 'incompatible', 'mid_incompatible', 'highly_incompatible'] %>
      <% compatibility_degree.each do |degree| %>
        <div class="row justify-content-center">
          <div class="col-4 border-bottom text text-center font-weight-light">
            <% case degree %>
            <% when 'highly_compatible' %>
              <%= '❤❤❤'%>
            <% when 'mid_compatible' %>
              <%= '❤❤' %>
            <% when 'low_compatible' %>
              <%= '❤' %>
            <% when 'neutral' %>
              <%= '=' %>
            <% when 'incompatible' %>
              <%= '⚠' %>
            <% when 'mid_incompatible' %>
              <%= '⚠⚠' %>
            <% else 'highly_incompatible' %>
              <%= '⚠⚠⚠' %>
            <% end %>
          </div>
          <div class="col-8 border-bottom text-center">
            <%= @zodiac_compatibility[degree].join(', ') %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
